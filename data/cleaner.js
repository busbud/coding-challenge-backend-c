var fs = require('fs');
var stream = require('stream');

var DATA_FILE_PATH = __dirname + '/cities_canada-usa.tsv';
var OUTPUT_PATH = __dirname + '/data.js';
var MIN_POPULATION = 5000;

fs.unlinkSync(OUTPUT_PATH);

var writer = fs.openSync(OUTPUT_PATH, 'w');
var file_contents = fs.readFileSync(DATA_FILE_PATH);
var output = [];

console.log("Cleaning up the data...");

var lines = file_contents.toString().split('\n');

output = "// Generated by cleaner.js\n";
output += 'exports.cities = "' + lines.join("\\n") + '";';
fs.writeSync(writer, output);

console.log("Done.");